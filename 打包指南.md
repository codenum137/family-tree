# 家谱生成器打包指南

## 环境准备

### 1. 安装Python环境
- 下载并安装Python 3.8或更高版本
- 确保在安装时勾选"Add Python to PATH"

### 2. 安装依赖包
```bash
pip install pyinstaller matplotlib numpy
```

## 快速打包

### 方法一：使用批处理文件（推荐）
1. 双击`打包.bat`文件
2. 等待打包完成
3. 在`家谱工具发布包`文件夹中找到可执行文件

### 方法二：使用Python打包脚本
1. 运行以下命令：
```bash
python build.py
```
2. 按照提示完成打包

### 方法三：手动打包
```bash
pyinstaller --onefile --windowed --name "家谱生成器" --add-data "markdown_parser.py;." --add-data "main.py;." --add-data "家谱数据;家谱数据" family_tree_gui.py
```

## 打包后的目录结构

```
家谱工具发布包/
├── 家谱生成器.exe      # 主程序
├── 使用说明.txt        # 用户使用说明  
├── 家谱数据/           # 家谱数据文件夹
│   ├── 示例家谱.md
│   └── 正才祖后藤图.md
└── 生成图片/           # 输出图片文件夹
```

## 发布说明

### 给长辈的完整包应该包含：
1. `家谱生成器.exe` - 主程序
2. `使用说明.txt` - 详细使用说明
3. `家谱数据/` 文件夹 - 包含示例文件
4. `生成图片/` 文件夹 - 空文件夹，用于保存生成的图片

### 使用要求：
- Windows 7/8/10/11 操作系统
- 不需要安装Python或其他依赖
- 程序大小约50-100MB

## 注意事项

1. **字体支持**：程序使用SimHei字体，Windows系统通常已预装
2. **文件编码**：所有.md文件必须使用UTF-8编码保存
3. **杀毒软件**：可能会误报，需要添加到白名单
4. **权限问题**：如果无法启动，尝试右键"以管理员身份运行"

## 测试清单

打包完成后，请进行以下测试：

- [ ] 双击exe文件能正常启动
- [ ] 界面显示正常，中文字体正确
- [ ] 能够选择和预览家谱文件
- [ ] 能够生成家谱图片
- [ ] 生成的图片质量良好
- [ ] 能够打开结果文件夹
- [ ] 能够编辑家谱数据文件
- [ ] 能够创建新的家谱文件

## 故障排除

### 程序无法启动
1. 检查是否在Windows系统运行
2. 尝试以管理员身份运行
3. 检查杀毒软件是否拦截

### 字体显示异常  
1. 确认系统已安装SimHei字体
2. 检查.md文件是否为UTF-8编码

### 生成失败
1. 检查家谱数据格式是否正确
2. 确认文件路径中没有特殊字符

## 更新版本

如需更新程序：
1. 修改源代码
2. 重新运行打包脚本
3. 测试新版本功能
4. 更新版本号和说明文档